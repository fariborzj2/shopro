# ุณุณุชู ูุฑูุฏ ู ุซุจุชโูุงู ุจุง ููุจุงู ู OTP ุฏุฑ PHP

ุงู ูพุฑูฺู ฺฉ ุณุณุชู ฺฉุงูู ู ุงูู ุจุฑุง ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑุงู ุงุฒ ุทุฑู ุดูุงุฑู ููุจุงู ู ฺฉุฏ ฺฉโุจุงุฑ ูุตุฑู (OTP) ุงุณุช ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ PHP ุฎุงู ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช.

## โจ ูฺฺฏโูุง

- ูุฑูุฏ ู ุซุจุชโูุงู ุจุฏูู ูุงุฒ ุจู ุฑูุฒ ุนุจูุฑ.
- ุงุฑุณุงู ฺฉุฏ ุชุงุฏ ฺฉโุจุงุฑ ูุตุฑู (OTP) ุงุฒ ุทุฑู ูพุงูฺฉ.
- ุงุนุชุจุงุฑุณูุฌ ุดูุงุฑู ููุจุงู.
- ุงููุช ุจุงูุง ุจุง ุงุณุชูุงุฏู ุงุฒ ูุด ฺฉุฑุฏู ฺฉุฏูุง ู ุชุงุฑุฎ ุงููุถุง.
- ูุญุฏูุฏุช ูุฑุฎ ุงุฑุณุงู (Rate Limiting) ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุณูพู.
- ูุญุงูุธุช ุฏุฑ ุจุฑุงุจุฑ ุญููุงุช Brute-Force ุฑู ฺฉุฏ OTP.
- ุฑุงุจุท ฺฉุงุฑุจุฑ ุณุงุฏู ู ูุฏุฑู ุจุง ุงุณุชูุงุฏู ุงุฒ Tailwind CSS.
- ุงุฑุชุจุงุท ุขัะธะฝััะพะฝ ุจุง ุณุฑูุฑ ุงุฒ ุทุฑู AJAX (Fetch API).

## ๐ ุฑุงูููุง ุฑุงูโุงูุฏุงุฒ

ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุงู ูพุฑูฺู ุจู ุตูุฑุช ูุญูุ ูุฑุงุญู ุฒุฑ ุฑุง ุฏูุจุงู ฺฉูุฏ:

### ูพุดโูุงุฒูุง
- ูุจ ุณุฑูุฑ ุณุงุฒฺฏุงุฑ ุจุง PHP (ูุงููุฏ Apache ุง Nginx)
- PHP ูุณุฎู 7.4 ุง ุจุงูุงุชุฑ
- ุฏุชุงุจุณ MySQL ุง MariaDB
- ุงุจุฒุงุฑ `curl` ุจุฑุง ุชุณุช API

### ูุฑุงุญู ูุตุจ
1.  **ฺฉููู ฺฉุฑุฏู ูพุฑูฺู:**
    ```bash
    git clone <repository_url>
    cd <project_directory>
    ```

2.  **ุงุฌุงุฏ ุฏุชุงุจุณ:**
    - ฺฉ ุฏุชุงุจุณ ุฌุฏุฏ ุฏุฑ MySQL/MariaDB ุงุฌุงุฏ ฺฉูุฏ (ูุซูุงู `otp_login_db`).
    - ูุญุชูุงุช ูุงู `schema.sql` ุฑุง ุฏุฑ ุฏุชุงุจุณ ุฎูุฏ import ฺฉูุฏ. ุงู ฺฉุงุฑ ุฌุฏุงูู `users` ู `otp_codes` ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ.

3.  **ุชูุธูุงุช ูพุฑูฺู:**
    - ูุงู `config.example.php` ุฑุง ุจู `config.php` ฺฉูพ ฺฉูุฏ:
      ```bash
      cp config.example.php config.php
      ```
    - ูุงู `config.php` ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ุงุทูุงุนุงุช ุงุชุตุงู ุจู ุฏุชุงุจุณ (ูุงู ุฏุชุงุจุณุ ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ) ู ููฺูู ุงุทูุงุนุงุช API ุณุฑูุณ ูพุงูฺฉ IPPanel ุฎูุฏ (API Keyุ ุดูุงุฑู ูุฑุณุชูุฏู ู ฺฉุฏ ูพุชุฑู) ุฑุง ูุงุฑุฏ ฺฉูุฏ.

4.  **ุงุฌุฑุง ูุจ ุณุฑูุฑ:**
    - ูุจ ุณุฑูุฑ ุฎูุฏ ุฑุง ุทูุฑ ุชูุธู ฺฉูุฏ ฺฉู root directory ุขู ุจู ุฑุดู ุงู ูพุฑูฺู ุงุดุงุฑู ฺฉูุฏ.
    - ุงฺฏุฑ ุงุฒ ูุจ ุณุฑูุฑ ุฏุงุฎู PHP ุงุณุชูุงุฏู ูโฺฉูุฏุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:
      ```bash
      php -S localhost:8000
      ```

5.  **ูุดุงูุฏู ูพุฑูฺู:**
    - ูุฑูุฑฺฏุฑ ุฎูุฏ ุฑุง ุจุงุฒ ฺฉุฑุฏู ู ุจู ุขุฏุฑุณ `http://localhost:8000` (ุง ุขุฏุฑุณ ฺฉู ูุจ ุณุฑูุฑ ุดูุง ุฑู ุขู ุชูุธู ุดุฏู) ุจุฑูุฏ.

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
.
โโโ auth/
โ   โโโ send-code.php     # Endpoint ุจุฑุง ุงุฑุณุงู OTP
โ   โโโ verify.php        # Endpoint ุจุฑุง ุชุงุฏ OTP ู ูุฑูุฏ/ุซุจุชโูุงู
โโโ lib/
โ   โโโ db.php            # ุงุณฺฉุฑูพุช ุงุชุตุงู ุจู ุฏุชุงุจุณ (PDO)
โ   โโโ functions.php     # ุชูุงุจุน ุงุตู ู ฺฉูฺฉ ูพุฑูฺู
โโโ .gitignore            # ูุงูโูุง ฺฉู ุจุงุฏ ูุงุฏุฏู ฺฏุฑูุชู ุดููุฏ
โโโ config.example.php    # ููููู ูุงู ุชูุธูุงุช
โโโ dashboard.php         # ุตูุญู ูุญุงูุธุชโุดุฏู ุจุฑุง ฺฉุงุฑุจุฑุงู ูุงุฑุฏ ุดุฏู
โโโ index.php             # ุตูุญู ุงุตู ูุฑูุฏ ู ุฑุงุจุท ฺฉุงุฑุจุฑ
โโโ logout.php            # ุงุณฺฉุฑูพุช ุฎุฑูุฌ ุงุฒ ุณุณุชู
โโโ schema.sql            # ุณุงุฎุชุงุฑ ุฏุชุงุจุณ
โโโ README.md             # ููู ูุงู
```

## ๐งช ุชุณุช API ุจุง cURL

ูโุชูุงูุฏ APIูุง ูพุฑูฺู ุฑุง ูุณุชููุงู ุจุง `curl` ุชุณุช ฺฉูุฏ.

### ฑ. ุงุฑุณุงู ฺฉุฏ ุชุงุฏ

ุงู ุฏุณุชูุฑ ฺฉ ุฏุฑุฎูุงุณุช ุจุฑุง ุงุฑุณุงู ฺฉุฏ ุจู ุดูุงุฑู ููุจุงู ูุดุฎุต ุดุฏู ุงุฑุณุงู ูโฺฉูุฏ.

```bash
curl -X POST http://localhost:8000/auth/send-code.php \
-H "Content-Type: application/json" \
-d '{"mobile": "09123456789"}'
```

**ูพุงุณุฎ ูููู:**
```json
{
  "status": "ok",
  "message": "ฺฉุฏ ุชุงุฏ ุจุง ููููุช ุงุฑุณุงู ุดุฏ.",
  "timer": 120
}
```

### ฒ. ุชุงุฏ ฺฉุฏ ู ูุฑูุฏ

ูพุณ ุงุฒ ุฏุฑุงูุช ฺฉุฏ ูพุงูฺฉุ ุงุฒ ุงู ุฏุณุชูุฑ ุจุฑุง ุชุงุฏ ู ูุฑูุฏ ุงุณุชูุงุฏู ฺฉูุฏ.

```bash
curl -X POST http://localhost:8000/auth/verify.php \
-H "Content-Type: application/json" \
-d '{"mobile": "09123456789", "otp": "123456"}' # <-- OTP ุฏุฑุงูุช ุดุฏู ุฑุง ุงูุฌุง ูุงุฑุฏ ฺฉูุฏ
```

**ูพุงุณุฎ ูููู (ุจุฑุง ูุฑูุฏ ุงูู):**
```json
{
  "status": "ok",
  "message": "ุซุจุชโูุงู ุดูุง ุจุง ููููุช ุงูุฌุงู ุดุฏ ู ูุงุฑุฏ ุดุฏุฏ."
}
```

**ูพุงุณุฎ ูููู (ุจุฑุง ูุฑูุฏูุง ุจุนุฏ):**
```json
{
  "status": "ok",
  "message": "ุดูุง ุจุง ููููุช ูุงุฑุฏ ุดุฏุฏ."
}
```
