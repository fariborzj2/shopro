<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # ----------------------------------------------------------------------
    # Security Settings
    # ----------------------------------------------------------------------
    # Disable directory browsing
    Options -Indexes

    # Protect sensitive files from direct web access
    <Files ~ "^(composer\.(json|lock)|config\.php|README\.md|schema\.sql|package\.json)$">
        Require all denied
    </Files>

    # Deny access to .htaccess itself
    <Files .htaccess>
        Require all denied
    </Files>

    # ----------------------------------------------------------------------
    # Global Front Controller
    # ----------------------------------------------------------------------
    # Send all requests for non-existent files or directories to the main router.
    # This allows for clean URLs for both the storefront and the admin panel.
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ public/index.php?url=$1 [QSA,L]

</IfModule>
